name: 'Get Shaderc'
description: 'Builds Shaderc from source'

inputs:
  source_dir:
    description: ''
    required: false
    default: 'SHADERC_DIR'
  build_mode:
    description: ''
    required: false
    default: Release

runs:
  using: 'composite'
  steps:
  - shell: bash
    run: |
      git clone https://github.com/google/shaderc ${{inputs.source_dir}}
      cd ${{inputs.source_dir}}

  - shell: bash
    run: |
      cmake ${{inputs.source_dir}} -Bbuild/shaderc -DSHADERC_SKIP_TESTS:BOOL=OFF -DSHADERC_SKIP_EXAMPLES:BOOL=OFF -Wno-dev
      cmake --build build/shaderc

